<html>
<head>
    <title>Test Page for CCTrayGadget)</title>
    <script language="javascript" src="jsunit/app/jsUnitCore.js"></script>
    <script language="javascript" src="../code/main.js"></script>
</head>

<body>
<script language="javascript">
    gadget = new Object();
    gadget.debug = new Object();
    gadget.debug.trace = function(msg) {
        debug(msg);
    }

    function testShouldHaveASolidBase() {
        assert(true);
    }

    function testShouldUpdateViewDisplayWhenRefreshingWithDifferentStatus() {
        //fail("check lblStatus and iconStatus here");
    }

    function testShouldNotUpdateViewDisplayWhenRefreshingWithSameStatus() {
        //fail("check lblStatus and iconStatus here");
    }

    function testShouldDisplaySuccessWhenFailedIndicateNotOnPage() {
        var mockWebPage = new Object();
        mockWebPage.content = function () {
            return "BUILD SUCCESSFUL";
        }
        var myGadget = new MyGadget(mockWebPage, buildFailedIndicate);
        myGadget.refreshDisplay = function(status) {
            assertEquals(myGadget.buildSuccessfulMessage, status);
        }
        myGadget.checkBuildStatus();
    }

    function testShouldDisplayFailedWhenFailedIndicateOnPage() {
        var mockWebPage = new Object();
        mockWebPage.content = function () {
            return "BUILD FAILED";
        }
        var myGadget = new MyGadget(mockWebPage, buildFailedIndicate);
        myGadget.refreshDisplay = function(status) {
            assertEquals(myGadget.buildFailedMessage, status);
        }
        myGadget.checkBuildStatus();
    }

    function testShouldDisplayUnknownWhenExceptionThrownWhenAccessPage() {
        var mockWebPage = new Object();
        mockWebPage.content = function () {
            throw "HERE IS SOME EXCEPTION";
        }
        var myGadget = new MyGadget(mockWebPage, buildFailedIndicate);
        myGadget.refreshDisplay = function(status) {
            assertEquals(myGadget.buildStatusUnknownMessage, status);
        }
        myGadget.checkBuildStatus();
    }

</script>
</body>
</html>